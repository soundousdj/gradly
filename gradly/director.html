<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="icon" href="logo.jpg" type="image/jpeg">
    <title>Gradly</title>
    <link rel="stylesheet" href="director.css" />
    <link rel="stylesheet" href="/assets/site.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- ููุชุจุฉ jsPDF ูุชุตุฏูุฑ PDF -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.4.0/jspdf.umd.min.js"></script>
    <!-- ููุชุจุฉ SheetJS ูุชุตุฏูุฑ Excel -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    
</head>
<body>
    <div class="container">
        <!-- Sidebar -->
        <div class="sidebar">
            <div class="sidebar-header" style="text-align:center; padding: 30px 0;">
             <div class="site-logo">GRADLY</div>
            </div> 
            <div class="user-info">
                <div class="user-avatar">
                    <i class="fas fa-user"></i>
                </div>
                <div class="user-details">
                    <div id="user-name" class="user-name" style="font-weight:bold;"></div>
                    <div id="user-role" class="user-role" style="font-size:13px;color:#888;"></div>
                </div>
            </div>
            <ul class="sidebar-menu">
                <li class="menu-item active" data-page="dashboard-content">
                    <i class="fas fa-home"></i>
                    <span data-translate="ุงูุฑุฆูุณูุฉ">ุงูุฑุฆูุณูุฉ</span>
                </li>
                <li class="menu-item" data-page="students-content">
                    <i class="fas fa-user-graduate"></i>
                    <span data-translate="ุฅุฏุงุฑุฉุงูุทูุงุจ">ุงูุชูุงููุฐ</span>
                </li>
                 <li class="menu-item" data-page="manage-groups-content">
                    <i class="fas fa-users"></i> <!-- ุชู ุชุบููุฑ ุงูุฃููููุฉ -->
                    <span data-translate="ุฅุฏุงุฑุฉ ุงูุฃููุงุฌ">ุงุฏุงุฑุฉ ุงูุงููุงุฌ</span>
                </li>
                <li class="menu-item" data-page="teachers-content">
                    <i class="fa-solid fa-chalkboard-user"></i>
                    <span data-translate="ุงููุนูููู">ุงููุนูููู</span>
                </li>
                <li class="menu-item" data-page="meetings-content">
                    <i class="fas fa-calendar-alt"></i>
                    <span data-translate="ุงูุงุฌุชูุงุนุงุช">ุงูุงุฌุชูุงุนุงุช</span>
                </li>
                <li class="menu-item" data-page="reports-content">
                    <i class="fas fa-file-alt"></i>
                    <span data-translate="ุงูุชูุงุฑูุฑ">ุงูุชูุงุฑูุฑ</span>
                </li>
              
                <li class="menu-item" data-page="users-content">
                    <i class="fas fa-users-cog"></i>
                    <span data-translate="ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู">ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู</span>
                </li>
                <li class="menu-item" data-page="permissions-content">
                    <i class="fas fa-user-shield"></i>
                    <span data-translate="ุฅุฏุงุฑุฉ ุงูุตูุงุญูุงุช">ุฅุฏุงุฑุฉ ุงูุตูุงุญูุงุช</span>
                </li>
                <li class="menu-item" data-page="evaluation-network-content">
                    <i class="fas fa-network-wired"></i>
                    <span data-translate="ุฅุฏุงุฑุฉ ุดุจูุฉ ุชูููู">ุฅุฏุงุฑุฉ ุดุจูุฉ ุชูููู</span>
                </li>
                <li class="menu-item" data-page="settings-content">
                    <i class="fas fa-cog"></i>
                    <span data-translate="ุงูุฅุนุฏุงุฏุงุช">ุงูุฅุนุฏุงุฏุงุช</span>
                </li>
            </ul>
            <div class="sidebar-footer">
                <button id="logout-btn" class="btn btn-outline">
                    <i class="fas fa-sign-out-alt"></i>
                    <span data-translate="ุชุณุฌูู ุงูุฎุฑูุฌ">ุชุณุฌูู ุงูุฎุฑูุฌ</span>
                </button>
            </div>
        </div>

        <!-- Main content -->
        <div class="main-content">
            <div class="top-bar">
                <div class="toggle-sidebar">
                    <i class="fa-solid fa-bars"></i>
                </div>
                <div class="search-bar">
                    <input type="text" placeholder="ุจุญุซ..." data-translate="ุจุญุซ..." />
                    <i class="fas fa-search"></i>
                </div>
                <div class="top-bar-actions">
                    <div class="dropdown">
                        <button class="dropbtn" id="language-btn"><i class="fa-solid fa-language"></i></button>
                        <div class="dropdown-content">
                            <a href="#" data-lang="ar">ุงูุนุฑุจูุฉ</a>
                            <a href="#" data-lang="fr">Franรงais</a>
                            <a href="#" data-lang="en">English</a>
                        </div>
                    </div>
                    <button id="mode-toggle-btn"><i class="fas fa-adjust"></i></button>
                </div>
            </div>

            <!-- Dashboard content -->
            <div id="dashboard-content" class="content-area" style="display:block;">
                    <div class="dashboard-header">
                    <h2 data-translate="ููุญุฉ ุงูุชุญูู">ููุญุฉ ุงูุชุญูู</h2>
                    <p data-translate="ูุฑุญุจูุง ุจู ูู ูุธุงู ุฅุฏุงุฑุฉ ุงูุทูุงุจ">ูุฑุญุจูุง ุจู ูู ูุธุงู ุฅุฏุงุฑุฉ ุงูุชูุงููุฐ</p>
                </div>
                <div class="stats-cards">
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-user-graduate"></i>
                        </div>
                        <div class="stat-details">
                            <h3 data-translate="ุฅุฌูุงูู ุงูุทูุงุจ">ุฅุฌูุงูู ุงูุชูุงููุฐ</h3>
                            <p class="stat-number"></p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-chalkboard-teacher"></i>
                        </div>
                        <div class="stat-details">
                            <h3 data-translate="ุฅุฌูุงูู ุงููุนูููู">ุฅุฌูุงูู ุงููุนูููู</h3>
                            <p class="stat-number"></p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-chart-line"></i>
                        </div>
                        <div class="stat-details">
                            <h3 data-translate="ุงูุชููููุงุช">ุงูุชููููุงุช</h3>
                            <p class="stat-number"></p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-calendar-check"></i>
                        </div>
                        <div class="stat-details">
                            <h3 data-translate="ุงูุงุฌุชูุงุนุงุช">ุงูุงุฌุชูุงุนุงุช</h3>
                            <p class="stat-number"></p>
                        </div>
                    </div>
                    <div class="stat-card">
    <div class="stat-icon">
        <i class="fa-solid fa-child-dress"></i>
    </div>
    <div class="stat-details">
        <h3 data-translate="ุนุฏุฏ ุงูุฅูุงุซ">ุนุฏุฏ ุงูุฅูุงุซ</h3>
        <p class="stat-number"></p>
    </div>
</div>
<div class="stat-card">
    <div class="stat-icon">
        <i class="fa-solid fa-child"></i>
    </div>
    <div class="stat-details">
        <h3 data-translate="ุนุฏุฏ ุงูุฐููุฑ">ุนุฏุฏ ุงูุฐููุฑ</h3>
        <p class="stat-number"></p>
    </div>
</div>
                </div>
                <div class="dashboard-widgets">
                    <div class="widget recent-activities">
                        <div class="widget-header">
                            <h3 data-translate="ุขุฎุฑ ุงููุดุงุทุงุช">ุขุฎุฑ ุงููุดุงุทุงุช</h3>
                        </div>
                        <div class="widget-content">
                            <ul class="activity-list"></ul>
                        </div>
                    </div>
                </div>
                <div class="dashboard-widgets">
                    <div class="widget upcoming-meetings">
                        <div class="widget-header">
                            <h3 data-translate="ุงูุงุฌุชูุงุนุงุช ุงููุงุฏูุฉ">ุงูุงุฌุชูุงุนุงุช ุงููุงุฏูุฉ</h3>
                        </div>
                        <div class="widget-content">
                            <ul class="meeting-list"></ul>
                        </div>
                    </div>
                    <div class="widget top-students">
                        <div class="widget-header">
                            <h3 data-translate="ุงูุทูุงุจ ุงููุชููููู">ุงูุชูุงููุฐ ุงููุชููููู</h3>
                        </div>
                        <div class="widget-content">
                            <ul class="student-list"></ul>
                        </div>
                    </div>
                </div>
            </div>



   <!------------------------------------------------------------------------------------------>

   <!--ุตูุญุฉ ุงุฏุงุฑุฉ ุดุจูุฉ ุชูููู-->
<div id="evaluation-network-content" class="content-area" style="display:none;">
  <div class="header">
    <h2>ุฅุฏุงุฑุฉ ุดุจูุฉ ุชูููู</h2>
  </div>
  <!-- ูุนูููุงุช ุงูุดุจูุฉ (ุชุธูุฑ ุฏุงุฆููุง) -->
  <div class="network-meta-summary" style="margin-bottom:16px;">
    <label>ุงูุณูุฉ ุงูุฏุฑุงุณูุฉ: <input id="academic-year" type="text" placeholder="ูุซุงู: 2025/2026" style="width:120px"></label>
    <label style="margin-right:18px;">ุงููุฑุญูุฉ ุงูุชุนููููุฉ: <input id="education-stage" type="text" placeholder="ูุซุงู: ุงุจุชุฏุงุฆู" style="width:100px"></label>
    <label style="margin-right:18px;">ุงููุณุชูู: <input id="level-network" type="text" placeholder="ูุซุงู: ุงูุฃูู" style="width:80px"></label>
  </div>
<!-- ุฒุฑ ูุชุญ ุงููุงูุฐุฉ -->
<button id="open-network-modal-btn" class="btn btn-primary">ุฅุถุงูุฉ ุดุจูุฉ ุชููููู</button>

<!-- ุงููุงูุฐุฉ ุงูููุจุซูุฉ -->
<div id="network-modal" class="modal" style="display:none;">
  <div class="modal-content" style="max-width:400px;min-width:320px;">
    <span class="close" id="close-network-modal" style="float:left;cursor:pointer;font-size:22px;">ร</span>
    <h3 style="margin-bottom:15px;">ุฅุถุงูุฉ ุดุจูุฉ ุชูููู</h3>
    <form id="network-form">
      <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
    <div>
        <label for="network-form-year" class="block font-semibold text-sm mb-1">ุงูุณูุฉ ุงูุฏุฑุงุณูุฉ:</label>
        <select id="network-form-year" class="w-full p-2 border rounded" required>
            <option value="">-- ุงุฎุชุฑ ุงูุณูุฉ --</option>
        </select>
    </div>
    <div>
        <label for="network-form-level" class="block font-semibold text-sm mb-1">ุงููุณุชูู ุงูุฏุฑุงุณู:</label>
        <select id="network-form-level" class="w-full p-2 border rounded" required>
            <option value="">-- ุงุฎุชุฑ ุงููุณุชูู --</option>
        </select>
    </div>
    <div>
        <label for="network-form-subject" class="block font-semibold text-sm mb-1">ุงููุงุฏุฉ:</label>
        <select id="network-form-subject" class="w-full p-2 border rounded" required>
            <option value="">-- ุงุฎุชุฑ ุงููุงุฏุฉ --</option>
        </select>
    </div>
</div>
      <div style="margin-bottom:8px;">
        <label>ุงููุดุงุท:</label>
        <input type="text" id="activity-name" required class="form-control">
      </div>
      <div style="margin-bottom:8px;">
        <label>ููุงุกุฉ ุฎุชุงููุฉ:</label>
        <input type="text" id="competency-final" required class="form-control">
      </div>
      <div style="margin-bottom:8px;">
        <label>ููุงุกุฉ ูุฑุญููุฉ:</label>
        <input type="text" id="competency-stage" required class="form-control">
      </div>
      <div style="margin-bottom:8px;">
        <label>ููุงุกุฉ ูุฑุนูุฉ:</label>
        <input type="text" id="competency-sub" required class="form-control">
      </div>
      <div style="margin-bottom:8px;">
        <label>ุงููุนูุงุฑ:</label>
        <ul id="criteria-list" style="padding-right:18px;list-style:decimal;margin-bottom:4px;">
    <!-- ุงููุนุงููุฑ ุณุชุธูุฑ ููุง -->
  </ul>
  <div style="display:flex;gap:8px;">
    <input type="text" id="criteria-input" class="form-control" placeholder="ุฃุฏุฎู ูุนูุงุฑ ุฌุฏูุฏ">
    <button type="button" id="add-criteria-btn" class="btn btn-success" style="min-width:70px;">ุฅุถุงูุฉ</button>
  </div>
      </div>
      <button type="submit" class="btn btn-primary" style="margin-top:10px;width:100%;">ุญูุธ</button>
    </form>
  </div>
</div>
 <div id="networks-display"></div>
</div>
<!-- ======================== ุตูุญุฉ ุฅุฏุงุฑุฉ ุงูุชูุงููุฐ  =========== ============== -->
         <div id="students-content" class="content-area" style="display:none;">
            <div class="header">
                <h2 class="text-2xl font-bold text-blue-700">๐ ุฅุฏุงุฑุฉ ุงูุชูุงููุฐ</h2>
                <div class="flex items-center gap-4">
                    <div class="relative">
                        <input type="text" id="studentSearch" placeholder="ุจุญุซ ุจุงูุงุณู..." class="p-2 border rounded pl-8">
                        <i class="fas fa-search absolute left-2 top-1/2 -translate-y-1/2 text-gray-400"></i>
                    </div>
                    <button id="add-student-btn" class="bg-green-600 hover:bg-green-700 text-white px-6 py-2 rounded shadow">
                        โ ุฅุถุงูุฉ ุชูููุฐ
                    </button>
                </div>
            </div>
            
            <div class="text-center my-4">
                <span class="font-bold text-lg">ุฅุฌูุงูู ุงูุชูุงููุฐ: <span id="studentsCount">0</span></span>
            </div>

            <!-- ุฌุฏูู ุงูุชูุงููุฐ -->
            <div class="overflow-x-auto bg-white rounded shadow">
                <table class="w-full text-center">
                    <thead class="bg-gray-100">
                        <tr>
                            <th class="p-3">#</th>
                            <th class="p-3 text-right">ุงูุงุณู ุงููุงูู</th>
                            <th class="p-3">ุชุงุฑูุฎ ุงููููุงุฏ</th>
                            <th class="p-3">ุงูุฌูุณ</th>
                            <th class="p-3">ุงูููุฌ ุงูุญุงูู</th>
                            <th class="p-3">ุงูุฅุฌุฑุงุกุงุช</th>
                        </tr>
                    </thead>
                    <tbody id="studentsTable">
                        <!-- ุณูุชู ุชุนุจุฆุฉ ุงูุจูุงูุงุช ููุง ุจูุงุณุทุฉ JavaScript -->
                        <!-- ุนูุฏ ุฅูุดุงุก ุงูุตููู ูู ุฌุงูุงุณูุฑูุจุชุ ูุฌุจ ุฅุถุงูุฉ ุฎุงุตูุฉ onclick ููู ุตู -->
                    </tbody>
                </table>
            </div>
            <!-- ุชุฑููู ุงูุตูุญุงุช -->
            <div id="pagination-controls" class="flex justify-center items-center gap-2 mt-4"></div>
        </div>

        <!-- ูุงูุฐุฉ ุฅุถุงูุฉ ูุชุนุฏูู ุงูุชูููุฐ (ุงููุณุฎุฉ ุงููุญุณูุฉ ูุชุนุฏุฏุฉ ุงููุฑุงุญู) -->
        <div id="studentModal" class="fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center hidden z-50">
            <div class="bg-white p-6 rounded shadow-lg w-full max-w-lg relative">
                <button id="closeStudentModal" type="button" class="absolute top-2 left-2 text-2xl text-gray-500 hover:text-red-600" style="position:absolute;top:12px;left:12px;z-index:1000;">ร</button>
                <form id="studentForm">
            <!-- ุงููุฑุญูุฉ 1: ุงููุนูููุงุช ุงูุดุฎุตูุฉ -->
            <div class="student-step" id="step-personal">
                <h4 class="font-semibold mb-2 border-b pb-1">ุงููุนูููุงุช ุงูุดุฎุตูุฉ (ุฅุฌุจุงุฑู)</h4>
                <input id="firstname" type="text" placeholder="ุงูุงุณู ุงูุฃูู" class="w-full mb-3 p-2 border rounded" required />
                <input id="lastname" type="text" placeholder="ุงูููุจ" class="w-full mb-3 p-2 border rounded" required />
                <input id="dob" type="date" class="w-full mb-3 p-2 border rounded" required />
                <input id="birthplace" type="text" placeholder="ููุงู ุงููููุงุฏ" class="w-full mb-3 p-2 border rounded" required />
                <select id="gender" class="w-full mb-3 p-2 border rounded" required>
                    <option value="">ุงุฎุชุฑ ุงูุฌูุณ</option>
                    <option value="ุฐูุฑ">ุฐูุฑ</option>
                    <option value="ุฃูุซู">ุฃูุซู</option>
                </select>
                <input id="brothersCount" type="number" min="0" placeholder="ุนุฏุฏ ุงูุฅุฎูุฉ" class="w-full mb-3 p-2 border rounded" />
                <input id="sistersCount" type="number" min="0" placeholder="ุนุฏุฏ ุงูุฃุฎูุงุช" class="w-full mb-3 p-2 border rounded" />
                <div class="text-left">
                    <button type="button" class="bg-blue-600 text-white px-4 py-2 rounded" id="nextStep1">ุงูุชุงูู โ</button>
                </div>
            </div>
            <!-- ุงููุฑุญูุฉ 2: ุงููุนูููุงุช ุงูุฃูุงุฏูููุฉ ูุงูุงุชุตุงู -->
            <div class="student-step hidden" id="step-academic">
                <h4 class="font-semibold mb-2 border-b pb-1">ุงููุนูููุงุช ุงูุฃูุงุฏูููุฉ ูุงูุงุชุตุงู (ุฅุฌุจุงุฑู)</h4>
                <select id="classGroup"  class="w-full mb-3 p-2 border rounded"  required>
                    <option value="">ุงุฎุชุฑ ุงูุตู</option>
                    <!-- ุณูุชู ุชุนุจุฆุฉ ุงูุฎูุงุฑุงุช ูู ุฌุงูุงุณูุฑูุจุช -->
                </select>
                <input id="level" type="text" placeholder="ุงููุณุชูู ุงูุฏุฑุงุณู" class="w-full mb-3 p-2 border rounded" required />
                <input id="emergencyPhone" type="text" placeholder="ุฑูู ูุงุชู ุงูุทูุงุฑุฆ" class="w-full mb-3 p-2 border rounded" required />
                <input id="registrationDate" type="date" class="w-full mb-3 p-2 border rounded" required />
                <div class="flex justify-between">
                    <button type="button" class="bg-gray-400 text-white px-4 py-2 rounded" id="prevStep2">โ ุงูุณุงุจู</button>
                    <button type="button" class="bg-blue-600 text-white px-4 py-2 rounded" id="nextStep2">ุงูุชุงูู โ</button>
                </div>
            </div>
            <!-- ุงููุฑุญูุฉ 3: ูุนูููุงุช ููู ุงูุฃูุฑ ูุงููุชููู -->
            <div class="student-step hidden" id="step-guardian">
                <h4 class="font-semibold mb-2 border-b pb-1">ูุนูููุงุช ููู ุงูุฃูุฑ ูุงููุชููู (ุฅุฌุจุงุฑู)</h4>
                <div class="mb-2 font-bold text-blue-700">ููู ุงูุฃูุฑ</div>
                <input id="guardianFullName" type="text" placeholder="ุงุณู ููู ุงูุฃูุฑ" class="w-full mb-2 p-2 border rounded" required />
                <input id="guardianRelation" type="text" placeholder="ุตูุฉ ุงููุฑุงุจุฉ (ุฃุจุ ุฃูุ ...ุงูุฎ)" class="w-full mb-2 p-2 border rounded" required />
                <input id="guardianPhone" type="text" placeholder="ุฑูู ูุงุชู ููู ุงูุฃูุฑ" class="w-full mb-2 p-2 border rounded" required />
                <input id="guardianEmail" type="email" placeholder="ุฅูููู ููู ุงูุฃูุฑ" class="w-full mb-2 p-2 border rounded" />
                <input id="guardianAddress" type="text" placeholder="ุนููุงู ููู ุงูุฃูุฑ" class="w-full mb-2 p-2 border rounded" required />
                <div class="mb-2 font-bold text-blue-700 mt-4">ุงููุชููู/ุงููููู</div>
                <input id="agentFullName" type="text" placeholder="ุงุณู ุงููุชููู/ุงููููู" class="w-full mb-2 p-2 border rounded" required />
                <input id="agentRelation" type="text" placeholder="ุตูุฉ ุงููุฑุงุจุฉ ุฃู ุงูุนูุงูุฉ" class="w-full mb-2 p-2 border rounded" required />
                <input id="agentPhone" type="text" placeholder="ุฑูู ูุงุชู ุงููุชููู/ุงููููู" class="w-full mb-2 p-2 border rounded" required />
                <input id="agentEmail" type="email" placeholder="ุฅูููู ุงููุชููู/ุงููููู" class="w-full mb-2 p-2 border rounded" />
                <input id="agentAddress" type="text" placeholder="ุนููุงู ุงููุชููู/ุงููููู" class="w-full mb-2 p-2 border rounded" required />
                <div class="flex justify-between mt-2">
                    <button type="button" class="bg-gray-400 text-white px-4 py-2 rounded" id="prevStep3">โ ุงูุณุงุจู</button>
                    <button type="button" class="bg-blue-600 text-white px-4 py-2 rounded" id="nextStep3">ุงูุชุงูู โ</button>
                </div>
            </div>
            <!-- ุงููุฑุญูุฉ 4: ุงููุนูููุงุช ุงูุตุญูุฉ ูุงูุฅุถุงููุฉ -->
            <div class="student-step hidden" id="step-health">
                <h4 class="font-semibold mb-2 border-b pb-1">ุงููุนูููุงุช ุงูุตุญูุฉ ูุงูุฅุถุงููุฉ (ุงุฎุชูุงุฑู)</h4>
                <input id="height" type="number" min="0" placeholder="ุงูุทูู (ุณู)" class="w-full mb-3 p-2 border rounded" />
                <input id="weight" type="number" min="0" placeholder="ุงููุฒู (ูุบ)" class="w-full mb-3 p-2 border rounded" />
                <select id="bloodType" class="w-full mb-3 p-2 border rounded">
                    <option value="">ุฒูุฑุฉ ุงูุฏู</option>
                    <option value="A+">A+</option><option value="A-">A-</option>
                    <option value="B+">B+</option><option value="B-">B-</option>
                    <option value="O+">O+</option><option value="O-">O-</option>
                    <option value="AB+">AB+</option><option value="AB-">AB-</option>
                </select>
                <textarea id="description" class="w-full mb-3 p-2 border rounded" placeholder="ูุตู ุฃู ุชุนููู"></textarea>
                <textarea id="allergies" class="w-full mb-3 p-2 border rounded" placeholder="ุงูุญุณุงุณูุฉ (ุงุฐูุฑ ุฃู ููุน ุฅู ูุฌุฏุช)"></textarea>
                <textarea id="medicalConditions" class="w-full mb-3 p-2 border rounded" placeholder="ุญุงูุงุช ุทุจูุฉ ุฃุฎุฑู"></textarea>
                <div class="flex justify-between">
                    <button type="button" class="bg-gray-400 text-white px-4 py-2 rounded" id="prevStep4">โ ุงูุณุงุจู</button>
                    <button id="save-student-btn" type="submit" class="bg-green-600 text-white px-6 py-2 rounded">ุญูุธ ุงูุชูููุฐ</button>
                </div>
            </div>
        </form>
    </div>
</div>

<!-- ==================================================================== -->
<!-- ============== ุตูุญุฉ ุฅุฏุงุฑุฉ ุงููุนูููู  ============== -->
<!-- ==================================================================== -->
<div id="teachers-content" class="content-area p-6" style="display:none;">
    <!-- 1. ููุทูุฉ ุงููุงุฆูุฉ ูุงูุจุญุซ (ุชุธูุฑ ุจุดูู ุงูุชุฑุงุถู) -->
    <div id="teachers-list-view">
        <div class="header flex justify-between items-center mb-4">
            <h2 class="text-2xl font-bold text-blue-700">๐ฉโ๐ซ ุฅุฏุงุฑุฉ ุงููุนูููู</h2>
            <button id="add-teacher-btn" class="bg-green-600 hover:bg-green-700 text-white px-6 py-2 rounded shadow">
                โ ุฅุถุงูุฉ ูุนูู
            </button>
        </div>
        <!-- ููุงุชุฑ ุงูุจุญุซ ูุงูููุงุฏ -->
        <div class="my-4 p-4 bg-gray-50 rounded-lg shadow-sm flex flex-wrap items-center gap-4">
            <div class="relative flex-grow">
                <input type="text" id="teacherSearchInput" placeholder="ุจุญุซ ุจุงูุงุณู ุฃู ุงูุจุฑูุฏ..." class="p-2 border rounded w-full pl-8">
                <i class="fas fa-search absolute left-2 top-1/2 -translate-y-1/2 text-gray-400"></i>
            </div>
            <div>
                <h4 class="font-semibold mb-2 text-gray-600">ุชุตููุฉ ุญุณุจ ุงููุงุฏุฉ:</h4>
                <div id="subjects-filter-container" class="flex flex-wrap gap-2">
                    <!-- ุณูุชู ุชุนุจุฆุฉ ุฃุฒุฑุงุฑ ุงูููุงุฏ ููุง ุจุงูู JS -->
                </div>
            </div>
        </div>
        <!-- ุญุงููุฉ ุจุทุงูุงุช ุงููุนูููู -->
        <div id="teachers-cards-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
            <!-- ุณูุชู ุชุนุจุฆุฉ ุงูุจุทุงูุงุช ููุง ุจูุงุณุทุฉ JavaScript -->
        </div>
    </div>
    <!-- 2. ููุทูุฉ ุงูููู ุงูุดุฎุตู ูููุนูู (ูุฎููุฉ ุจุดูู ุงูุชุฑุงุถู) -->
    <div id="teacher-profile-view" class="content-area" style="display:none;"></div>
</div>

<!-- ูุงูุฐุฉ ุฅุถุงูุฉ ูุนูู ุฌุฏูุฏ -->
<div id="add-teacher-modal" class="fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center hidden z-50">
    <div class="bg-white p-6 rounded shadow-lg w-full max-w-lg relative">
        <button id="close-add-teacher-modal" type="button" class="absolute top-2 left-2 text-2xl text-gray-500 hover:text-red-600" style="position:absolute;top:12px;left:12px;z-index:1000;">ร</button>
        <h3 class="text-xl font-bold mb-4 text-blue-700 text-center">ุฅุถุงูุฉ ูุนูู ุฌุฏูุฏ</h3>
        <form id="add-teacher-form">
            <input type="text" id="teacher-fullname" class="w-full mb-3 p-2 border rounded" placeholder="ุงูุงุณู ุงููุงูู" required />
            <input type="email" id="teacher-email" class="w-full mb-3 p-2 border rounded" placeholder="ุงูุจุฑูุฏ ุงูุฅููุชุฑููู" required />
            <input type="text" id="teacher-phone" class="w-full mb-3 p-2 border rounded" placeholder="ุฑูู ุงููุงุชู" required />
            <input type="text" id="teacher-subject" class="w-full mb-3 p-2 border rounded" placeholder="ุงููุงุฏุฉ" required />
            <input type="text" id="teacher-degree" class="w-full mb-3 p-2 border rounded" placeholder="ุงูุฏุฑุฌุฉ ุงูุนูููุฉ" />
            <input type="text" id="teacher-address" class="w-full mb-3 p-2 border rounded" placeholder="ุงูุนููุงู" />
            <div class="flex justify-between mt-4">
                <button type="button" id="cancel-add-teacher" class="bg-gray-400 text-white px-4 py-2 rounded">ุฅูุบุงุก</button>
                <button type="submit" class="bg-green-600 text-white px-6 py-2 rounded">ุญูุธ ุงููุนูู</button>
            </div>
        </form>
    </div>
</div>

<!-- ูุงูุฐุฉ ุงูุฃุฏุงุก ุงูุดูุฑู -->
<div id="performance-modal" class="modal" style="display:none;">
    <div class="modal-content">
        <span id="close-performance-modal" class="close">ร</span>
        <canvas id="performance-chart" style="width: 100%; height: 300px;"></canvas>
        <textarea id="performance-comment" placeholder="ุฃุถู ุชุนููููุง..." rows="4" style="width: 100%; margin-top: 15px;"></textarea>
        <button id="save-performance-comment" class="btn btn-primary" style="margin-top: 10px;">ุญูุธ ุงูุชุนููู</button>
    </div>
</div>
<!-- ุตูุญุฉ ุงูุชูุงุฑูุฑ -->

<!-- ================================================================= -->
<!-- ======================== ุตูุญุฉ ุงูุชูุงุฑูุฑ ================================= -->
<!-- ================================================================= -->
<div id="reports-content" class="content-area p-6" style="display:none;">
    <!-- 1. ุชุฑููุณุฉ ุงูุตูุญุฉ -->
    <div class="header mb-6">
        <h2 class="text-2xl font-bold text-blue-700">๐ ุงูุชูุงุฑูุฑ ูุงูุชุญูููุงุช</h2>
    </div>

    <!-- 2. ููุญุฉ ุงูุชุญูู ูุชูููุฏ ุงูุชูุงุฑูุฑ -->
    <div class="p-4 bg-gray-50 rounded-lg shadow-md">
        <h3 class="font-bold text-lg mb-4 border-b pb-2">ููุญุฉ ุชูููุฏ ุงูุชูุงุฑูุฑ</h3>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 items-end">
            <div>
                <label for="report-type-select" class="block font-semibold mb-1">1. ุงุฎุชุฑ ููุน ุงูุชูุฑูุฑ:</label>
                <select id="report-type-select" class="w-full p-2 border rounded">
                    <option value="academic">ุชูุฑูุฑ ุงูุฃุฏุงุก ุงูุฃูุงุฏููู</option>
                    <option value="attendance">ุชูุฑูุฑ ุงูุญุถูุฑ ูุงูุบูุงุจ</option>
                    <option value="teacher_eval">ุชูุฑูุฑ ุฃุฏุงุก ุงููุนูููู</option>
                </select>
            </div>
            <div>
                <label for="report-scope-select" class="block font-semibold mb-1">2. ุงุฎุชุฑ ุงููุทุงู:</label>
                <select id="report-scope-select" class="w-full p-2 border rounded">
                    <!-- ุณูุชู ุชุนุจุฆุชูุง ุจุงูู JS -->
                </select>
            </div>
            <div>
                <button id="generate-report-btn" class="w-full bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded shadow">
                    <i class="fas fa-cogs"></i> ุชูููุฏ ุงูุชูุฑูุฑ
                </button>
            </div>
        </div>
    </div>

    <!-- 3. ุญุงููุฉ ุนุฑุถ ุงูุชูุฑูุฑ (ุณุชุนุฑุถ ุงูุฌุฏูู ูุงููุฎุทุท ุงูุจูุงูู) -->
    <div id="report-display-container" class="mt-6 bg-white p-4 rounded shadow hidden">
        <div class="flex justify-between items-center mb-4">
            <h3 id="report-title" class="text-xl font-bold text-gray-800">ูุชุงุฆุฌ ุงูุชูุฑูุฑ</h3>
            <div id="export-buttons-container" class="flex gap-2">
                <button id="export-pdf-btn" class="bg-red-500 text-white px-4 py-1 rounded text-sm hover:bg-red-600"><i class="fas fa-file-pdf"></i> PDF</button>
                <button id="export-excel-btn" class="bg-green-600 text-white px-4 py-1 rounded text-sm hover:bg-green-700"><i class="fas fa-file-excel"></i> Excel</button>
            </div>
        </div>
        <div id="report-output" class="overflow-x-auto"></div>
        <div id="report-chart-container" class="mt-6">
            <canvas id="report-chart"></canvas>
        </div>
    </div>
</div>

<!-- ============== ุตูุญุฉ ุฅุฏุงุฑุฉ ุงูุฃููุงุฌ ============== -->
<div id="manage-groups-content" class="content-area p-6" style="display:none;">
    <div class="flex justify-between items-center mb-6 border-b pb-4">
        <h2 class="text-2xl font-bold text-blue-800">ุฅุฏุงุฑุฉ ุงูุฃููุงุฌ</h2>
        <button id="add-year-btn" class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded shadow">+ ุฅุถุงูุฉ ุณูุฉ ุฏุฑุงุณูุฉ</button>
    </div>
    
    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
        <!-- ูุณู ุงูุชูุงููุฐ ุบูุฑ ุงููุณุฌููู -->
        <div class="lg:col-span-1 bg-white p-4 rounded-lg shadow-md">
            <h3 class="font-bold text-lg mb-3">ุชูุงููุฐ ุบูุฑ ูุณุฌููู</h3>
            <div class="relative mb-3">
                <input type="text" id="unassigned-search" placeholder="ุจุญุซ ุนู ุชูููุฐ..." class="w-full p-2 border rounded pl-8">
                <i class="fas fa-search absolute right-2 top-1/2 -translate-y-1/2 text-gray-400"></i>
            </div>
            <div id="unassigned-students-list" class="space-y-2 h-96 overflow-y-auto border p-2 rounded bg-gray-50">
                <!-- ุณูุชู ููุก ุงูุชูุงููุฐ ููุง -->
            </div>
        </div>
        
        <!-- ูุณู ุงูุณููุงุช ูุงูุฃููุงุฌ -->
        <div class="lg:col-span-2 bg-white p-4 rounded-lg shadow-md">
            <h3 class="font-bold text-lg mb-3">ุงูุณููุงุช ุงูุฏุฑุงุณูุฉ ูุงูุฃููุงุฌ</h3>
            <div id="years-groups-list" class="space-y-6 h-96 overflow-y-auto">
                <!-- ุณูุชู ููุก ุงูุณููุงุช ูุงูุฃููุงุฌ ููุง -->
            </div>
        </div>
    </div>
    
    <!-- ูุงูุฐุฉ ููุจุซูุฉ ูุฅุถุงูุฉ/ุชุนุฏูู ููุฌ -->
    <div id="add-group-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden z-50">
        <div class="bg-white p-6 rounded-lg shadow-xl w-full max-w-md">
            <div class="flex justify-between items-center border-b pb-2 mb-4">
                <h3 class="text-xl font-bold text-blue-700">ุฅุถุงูุฉ ููุฌ ุฌุฏูุฏ</h3>
                <button id="close-group-modal-btn" class="text-2xl text-gray-500 hover:text-red-600">ร</button>
            </div>
            <form id="add-group-form">
    <input type="hidden" id="group-year-id">
    <div class="mb-4">
        <label for="group-name" class="block font-semibold mb-1">ุงุณู ุงูููุฌ:</label>
        <input type="text" id="group-name" class="w-full p-2 border rounded" required>
    </div>
    <div class="mb-4">
        <label for="group-level" class="block font-semibold mb-1">ุงููุณุชูู ุงูุฏุฑุงุณู:</label>
        <select id="group-level" class="w-full p-2 border rounded" required>
            <!-- ุณูุชู ุชุนุจุฆุฉ ุงูุฎูุงุฑุงุช ูู ุฌุงูุงุณูุฑูุจุช -->
        </select>
    </div>
    <div class="mb-4">
        <label for="group-teacher" class="block font-semibold mb-1">ุงูุฃุณุชุงุฐ ุงููุณุคูู:</label>
        <select id="group-teacher" class="w-full p-2 border rounded" required>
            <!-- ุณูุชู ุชุนุจุฆุฉ ุงููุนูููู ููุง -->
        </select>
    </div>
    <div class="text-left">
        <button type="submit" class="bg-green-600 hover:bg-green-700 text-white px-8 py-2 rounded">ุญูุธ</button>
    </div>
</form>
        </div>
    </div>
</div>


<!-- ุตูุญุฉ ุงูุงุฌุชูุงุนุงุช -->
<!-- ================================================================= -->
<!-- ============== ุตูุญุฉ ุฅุฏุงุฑุฉ ุงูุงุฌุชูุงุนุงุช  ============================= -->
<!-- ================================================================= -->
<div id="meetings-content" class="content-area p-6" style="display:none;">
    <!-- 1. ุชุฑููุณุฉ ุงูุตูุญุฉ ูุฒุฑ ุงูุฅุถุงูุฉ -->
    <div class="header flex justify-between items-center mb-4">
        <h2 class="text-2xl font-bold text-blue-700">๐๏ธ ุฅุฏุงุฑุฉ ุงูุงุฌุชูุงุนุงุช</h2>
        <button id="add-meeting-btn" class="bg-green-600 hover:bg-green-700 text-white px-6 py-2 rounded shadow">
            โ ุฌุฏููุฉ ุงุฌุชูุงุน ุฌุฏูุฏ
        </button>
    </div>

    <!-- 2. ุดุฑูุท ุงูููุงุชุฑ ูุงูุจุญุซ -->
    <div class="my-4 p-4 bg-gray-50 rounded-lg shadow-sm flex flex-wrap items-center gap-4">
        <div class="relative flex-grow">
            <input type="text" id="meeting-search-input" placeholder="ุจุญุซ ุจุงูููุถูุน ุฃู ุงููุดุงุฑููู..." class="p-2 border rounded w-full pl-8">
            <i class="fas fa-search absolute left-2 top-1/2 -translate-y-1/2 text-gray-400"></i>
        </div>
        <div>
            <label for="meeting-status-filter" class="font-semibold text-gray-600">ุงูุญุงูุฉ:</label>
            <select id="meeting-status-filter" class="p-2 border rounded">
                <option value="all">ุงููู</option>
                <option value="ูุฌุฏูู">ูุฌุฏูู</option>
                <option value="ููุชูู">ููุชูู</option>
                <option value="ููุบู">ููุบู</option>
            </select>
        </div>
        <div>
             <input type="date" id="meeting-date-filter" class="p-2 border rounded" title="ุชุตููุฉ ุญุณุจ ุชุงุฑูุฎ ูุญุฏุฏ">
        </div>
    </div>

    <!-- 3. ุฌุฏูู ุนุฑุถ ุงูุงุฌุชูุงุนุงุช -->
    <div class="overflow-x-auto bg-white rounded shadow">
        <table class="w-full text-center">
            <thead class="bg-gray-100">
                <tr>
                    <th class="p-3 text-right">ุงูููุถูุน</th>
                    <th class="p-3">ุงูุชุงุฑูุฎ ูุงูููุช</th>
                    <th class="p-3">ุงููุดุงุฑููู</th>
                    <th class="p-3">ุงูุญุงูุฉ</th>
                    <th class="p-3">ุงูุฅุฌุฑุงุกุงุช</th>
                </tr>
            </thead>
            <tbody id="meetings-table-body">
                <!-- ุณูุชู ุชุนุจุฆุฉ ุงูุจูุงูุงุช ููุง ุจูุงุณุทุฉ JavaScript -->
            </tbody>
        </table>
    </div>

    <!-- 4. ูุงูุฐุฉ ููุจุซูุฉ (Modal) ูุฌุฏููุฉ/ุชุนุฏูู ุงุฌุชูุงุน -->
<div id="meeting-modal" class="fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center hidden z-50" style="z-index: 9999;">
        <div class="bg-white p-6 rounded shadow-lg w-full max-w-lg relative">
            <button id="close-meeting-modal" type="button" class="absolute top-2 left-2 text-2xl text-gray-500 hover:text-red-600">ร</button>
            <h3 id="meeting-modal-title" class="text-xl font-bold mb-4 text-blue-700 text-center">ุฌุฏููุฉ ุงุฌุชูุงุน ุฌุฏูุฏ</h3>
            <form id="meeting-form">
                <input type="hidden" id="meeting-id"> <!-- ูุชุฎุฒูู ID ุงูุงุฌุชูุงุน ุนูุฏ ุงูุชุนุฏูู -->
                <input id="meeting-subject" type="text" placeholder="ููุถูุน ุงูุงุฌุชูุงุน" class="w-full mb-3 p-2 border rounded" required />
                <div class="grid grid-cols-2 gap-2 mb-3">
                    <input id="meeting-date" type="date" class="p-2 border rounded" required title="ุชุงุฑูุฎ ุงูุงุฌุชูุงุน" />
                    <input id="meeting-time" type="time" class="p-2 border rounded" required title="ููุช ุงูุงุฌุชูุงุน"/>
                </div>
                <h4 class="font-semibold mb-2">ุงููุดุงุฑููู (ุงุฎุชูุงุฑู)</h4>
                <!-- === ูุงุฌูุฉ ุงููุดุงุฑููู ุงูุญุฏูุซุฉ (ุถุนูุง ููุงู <select id="meeting-participants"> ...) === -->
<div class="mb-4">
    <label class="block font-semibold mb-2">ุงููุดุงุฑููู:</label>
    <div id="participants-container" class="relative">
        <div class="participants-input-wrapper border rounded p-1 flex flex-wrap items-center gap-1 cursor-text" onclick="document.getElementById('participant-search').focus()">
            <div id="selected-participants-pills" class="flex flex-wrap gap-1"></div>
            <input type="text" id="participant-search" class="flex-grow p-1 outline-none" placeholder="ุงุจุญุซ ุนู ูุนูู ุฃู ููู ุฃูุฑ...">
        </div>
        <div id="participants-dropdown" class="absolute z-10 w-full bg-white border mt-1 rounded shadow-lg max-h-60 overflow-y-auto hidden"></div>
    </div>
</div>
                <input id="meeting-participant-search-input" type="text" placeholder="ุจุญุซ ุจุงุณู ูุดุงุฑู" class="mb-2 p-2 border rounded" />
                <textarea id="meeting-description" class="w-full mb-3 p-2 border rounded" placeholder="ูุตู ููุฌุฒ ุฃู ุฃุฌูุฏุฉ ุงูุงุฌุชูุงุน..."></textarea>
                <textarea id="meeting-report" class="w-full mb-3 p-2 border rounded" placeholder="ุชูุฑูุฑ ุงูุงุฌุชูุงุน (ูุชู ุชุนุจุฆุชู ุจุนุฏ ุงูุชูุงู ุงูุงุฌุชูุงุน)"></textarea>
                
                <div class="flex justify-between items-center">
                     <select id="meeting-status" class="p-2 border rounded">
                        <option value="ูุฌุฏูู">ูุฌุฏูู</option>
                        <option value="ููุชูู">ููุชูู</option>
                        <option value="ููุบู">ููุบู</option>
                    </select>
                    <button id="save-meeting-btn" type="submit" class="bg-green-600 text-white px-6 py-2 rounded">ุญูุธ ุงูุงุฌุชูุงุน</button>
                </div>
            </form>
        </div>
    </div>
</div>
<!--=============================================================================-->
<!--=========================== ุตูุญุฉ ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู =========================-->
<!--=============================================================================-->
<div id="users-content" class="content-area p-6" style="display:none;">
    <!-- 1. ุชุฑููุณุฉ ุงูุตูุญุฉ ูุฒุฑ ุงูุฅุถุงูุฉ -->
    <div class="header flex justify-between items-center mb-4">
        <h2 class="text-2xl font-bold text-blue-700">๐ฅ ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู</h2>
        <button id="add-user-btn" class="bg-green-600 hover:bg-green-700 text-white px-6 py-2 rounded shadow">
            โ ุฅุถุงูุฉ ูุณุชุฎุฏู ุฌุฏูุฏ
        </button>
    </div>

    <!-- 2. ุดุฑูุท ุงูููุงุชุฑ ูุงูุจุญุซ -->
    <div class="my-4 p-4 bg-gray-50 rounded-lg shadow-sm flex flex-wrap items-center gap-4">
        <div class="relative flex-grow">
            <input type="text" id="user-search-input" placeholder="ุจุญุซ ุจุงูุงุณู ุฃู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู..." class="p-2 border rounded w-full pl-8">
            <i class="fas fa-search absolute left-2 top-1/2 -translate-y-1/2 text-gray-400"></i>
        </div>
        <div>
            <label for="user-role-filter" class="font-semibold text-gray-600">ุงูุฏูุฑ:</label>
            <select id="user-role-filter" class="p-2 border rounded">
                <option value="all">ุงููู</option>
                <option value="director">ูุฏูุฑ</option>
                <option value="teacher">ูุนูู</option>
                <option value="parent">ููู ุฃูุฑ</option>
            </select>
        </div>
    </div>

    <!-- 3. ุฌุฏูู ุนุฑุถ ุงููุณุชุฎุฏููู -->
    <div class="overflow-x-auto bg-white rounded shadow">
        <table class="w-full text-center">
            <thead class="bg-gray-100">
                <tr>
                    <th class="p-3 text-right">ุงูุงุณู ุงููุงูู</th>
                    <th class="p-3">ุงูุจุฑูุฏ ุงูุฅููุชุฑููู</th>
                    <th class="p-3">ุงูุฃุฏูุงุฑ</th>
                    <th class="p-3">ุงูุญุงูุฉ</th>
                    <th class="p-3">ุงูุฅุฌุฑุงุกุงุช</th>
                </tr>
            </thead>
            <tbody id="users-table-body">
                <!-- ุณูุชู ููุก ุงูุจูุงูุงุช ููุง ุจูุงุณุทุฉ JavaScript -->
            </tbody>
        </table>
    </div>

    <!-- 4 . ูุงูุฐุฉ ููุจุซูุฉ (Modal) ูุฅุถุงูุฉ/ุชุนุฏูู ูุณุชุฎุฏู -->
    <div id="user-modal" class="fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center hidden z-50" style="z-index: 9999;">
        <div class="bg-white p-6 rounded shadow-lg w-full max-w-lg relative">
            <button id="close-user-modal" type="button" class="absolute top-2 left-2 text-2xl text-gray-500 hover:text-red-600">ร</button>
            <h3 id="user-modal-title" class="text-xl font-bold mb-4 text-blue-700 text-center">ุฅุถุงูุฉ ูุณุชุฎุฏู ุฌุฏูุฏ</h3>
            <form id="user-form">
                <input type="hidden" id="user-id"> <!-- ูุชุฎุฒูู ID ุงููุณุชุฎุฏู ุนูุฏ ุงูุชุนุฏูู -->
                
                <!-- ูุนูููุงุช ุฃุณุงุณูุฉ -->
                <input id="user-fullname" type="text" placeholder="ุงูุงุณู ุงููุงูู" class="w-full mb-3 p-2 border rounded" required />
                <input id="user-email" type="email" placeholder="ุงูุจุฑูุฏ ุงูุฅููุชุฑููู" class="w-full mb-3 p-2 border rounded" required />
                <input id="user-password" type="password" placeholder="ูููุฉ ุงููุฑูุฑ (ุงุชุฑููุง ูุงุฑุบุฉ ูุนุฏู ุงูุชุบููุฑ)" class="w-full mb-3 p-2 border rounded" />
                
                <!-- ุชุญุฏูุฏ ุงูุฃุฏูุงุฑ -->
                <h4 class="font-semibold mb-2">ุงูุฃุฏูุงุฑ ุงูููููุญุฉ:</h4>
                <div id="user-roles-checkboxes" class="grid grid-cols-3 gap-2 mb-4 p-2 border rounded">
                    <!-- ุณูุชู ุชุนุจุฆุฉ ูุฑุจุนุงุช ุงูุงุฎุชูุงุฑ ุจุงูู JS -->
                    <!-- ูุซุงู: <label><input type="checkbox" value="teacher"> ูุนูู</label> -->
                </div>

                <!-- ุชูุนูู/ุชุนุทูู ุงูุญุณุงุจ -->
                 <label class="flex items-center gap-2 mb-4">
                    <input type="checkbox" id="user-is-active" checked>
                    <span>ุญุณุงุจ ูุดุท</span>
                </label>
                
                <div class="flex justify-end">
                    <button id="save-user-btn" type="submit" class="bg-green-600 text-white px-6 py-2 rounded">ุญูุธ ุงููุณุชุฎุฏู</button>
                </div>
            </form>
        </div>
    </div>
</div>


<!-- ================================================================= -->
<!-- ============== ุตูุญุฉ ุฅุฏุงุฑุฉ ุงูุตูุงุญูุงุช =================== ============== -->
<!-- ================================================================= -->
<div id="permissions-content" class="content-area p-6" style="display:none;">
    <!-- 1. ุชุฑููุณุฉ ุงูุตูุญุฉ -->
    <div class="header mb-6">
        <h2 class="text-2xl font-bold text-blue-700">๐ก๏ธ ุฅุฏุงุฑุฉ ุงูุตูุงุญูุงุช ูุงูุฃุฏูุงุฑ</h2>
        <p class="text-gray-600">ุชุญูู ุจูุง ูููู ููู ุฏูุฑ ุฃู ููุนูู ูู ุงููุธุงู.</p>
    </div>

    <!-- 2. ูุงุฌูุฉ ุงูุฅุฏุงุฑุฉ ุงูุฑุฆูุณูุฉ -->
    <div class="flex flex-col md:flex-row gap-6">
        
        <!-- ุงูุนููุฏ ุงูุฃูู: ูุงุฆูุฉ ุงูุฃุฏูุงุฑ -->
        <div class="md:w-1/3 bg-white p-4 rounded shadow">
            <h3 class="font-bold text-lg mb-3 border-b pb-2">ุงูุฃุฏูุงุฑ ุงููุชุงุญุฉ</h3>
            <ul id="roles-list" class="space-y-2">
                <!-- ุณูุชู ููุก ุงูุฃุฏูุงุฑ ููุง ุจูุงุณุทุฉ JavaScript -->
                <!-- ูุซุงู: <li class="p-2 cursor-pointer rounded hover:bg-blue-100" data-role-id="1">ูุฏูุฑ</li> -->
            </ul>
        </div>

        <!-- ุงูุนููุฏ ุงูุซุงูู: ููุญุฉ ุชุญูู ุงูุตูุงุญูุงุช ููุฏูุฑ ุงููุญุฏุฏ -->
        <div class="md:w-2/3 bg-white p-4 rounded shadow">
            <div id="permissions-panel" class="hidden">
                <h3 class="font-bold text-lg mb-3">
                    ุตูุงุญูุงุช ุฏูุฑ: <span id="selected-role-name" class="text-blue-700"></span>
                </h3>
                <div id="permissions-checkboxes" class="grid grid-cols-2 md:grid-cols-3 gap-4 border-t pt-4">
                    <!-- ุณูุชู ููุก ุงูุตูุงุญูุงุช ููุง ูู checkboxes -->
                    <!-- ูุซุงู: <label><input type="checkbox" value="1"> ุนุฑุถ ุงูุชูุงุฑูุฑ</label> -->
                </div>
                <div class="mt-6 text-left">
                    <button id="save-permissions-btn" class="bg-green-600 hover:bg-green-700 text-white px-8 py-2 rounded shadow">
                        ๐พ ุญูุธ ุงูุชุบููุฑุงุช
                    </button>
                </div>
            </div>
            <div id="permissions-placeholder" class="text-center text-gray-500 py-10">
                <i class="fas fa-hand-pointer fa-2x mb-2"></i>
                <p>ุงูุฑุฌุงุก ุงุฎุชูุงุฑ ุฏูุฑ ูู ุงููุงุฆูุฉ ูุนุฑุถ ูุชุนุฏูู ุตูุงุญูุงุชู.</p>
            </div>
        </div>

    </div>
</div>
<!--=============================================================================-->
<!-- ====================== ุตูุญุฉ ุงูุฅุนุฏุงุฏุงุช ====================== -->
<!--=============================================================================-->
<div id="settings-content" class="content-area p-6" style="display:none;">
    <!-- 1. ุชุฑููุณุฉ ุงูุตูุญุฉ -->
    <div class="header mb-6">
        <h2 class="text-2xl font-bold text-blue-700">โ๏ธ ุฅุนุฏุงุฏุงุช ุงููุธุงู</h2>
    </div>

    <!-- 2. ุญุงููุฉ ุงูุฅุนุฏุงุฏุงุช ูุน ุงูุชุจููุจุงุช -->
    <div class="flex flex-col md:flex-row gap-6">
        
        <!-- ูุงุฆูุฉ ุงูุชุจููุจุงุช (ุงูุนููุฏ ุงูุฃูู) -->
        <div class="md:w-1/4">
            <ul id="settings-tabs" class="space-y-1">
                <li><a href="#personal-account-tab" class="settings-tab active-tab"><i class="fas fa-user-circle w-6"></i> ุงูุญุณุงุจ ุงูุดุฎุตู</a></li>
                <li><a href="#general-settings-tab" class="settings-tab"><i class="fas fa-school w-6"></i> ุฅุนุฏุงุฏุงุช ุงููุธุงู</a></li>
                <li><a href="#data-backup-tab" class="settings-tab"><i class="fas fa-database w-6"></i> ุงูุจูุงูุงุช ูุงููุณุฎ ุงูุงุญุชูุงุทู</a></li>
            </ul>
        </div>

        <!-- ูุญุชูู ุงูุชุจููุจุงุช (ุงูุนููุฏ ุงูุซุงูู) -->
        <div class="md:w-3/4">
            <!-- ุชุจููุจ: ุงูุญุณุงุจ ุงูุดุฎุตู -->
            <div id="personal-account-tab" class="settings-tab-content bg-white p-6 rounded shadow">
                <h3 class="font-bold text-lg mb-4 border-b pb-2">ุฅุฏุงุฑุฉ ุญุณุงุจู ุงูุดุฎุตู</h3>
                <form id="personal-info-form" class="space-y-4">
                    <div>
                        <label for="director-fullname" class="block font-semibold">ุงูุงุณู ุงููุงูู:</label>
                        <input type="text" id="director-fullname" class="w-full p-2 border rounded mt-1">
                    </div>
                    <div>
                        <label for="director-email" class="block font-semibold">ุงูุจุฑูุฏ ุงูุฅููุชุฑููู:</label>
                        <input type="email" id="director-email" class="w-full p-2 border rounded mt-1 bg-gray-100" disabled>
                    </div>
                    <button type="submit" class="bg-blue-600 text-white px-6 py-2 rounded">ุญูุธ ุชุบููุฑุงุช ุงูุงุณู</button>
                </form>
                <hr class="my-6">
                <h4 class="font-semibold mb-4">ุชุบููุฑ ูููุฉ ุงููุฑูุฑ</h4>
                <form id="password-change-form" class="space-y-4">
                    <input type="password" id="current-password" placeholder="ูููุฉ ุงููุฑูุฑ ุงูุญุงููุฉ" class="w-full p-2 border rounded">
                    <input type="password" id="new-password" placeholder="ูููุฉ ุงููุฑูุฑ ุงูุฌุฏูุฏุฉ" class="w-full p-2 border rounded">
                    <input type="password" id="confirm-new-password" placeholder="ุชุฃููุฏ ูููุฉ ุงููุฑูุฑ ุงูุฌุฏูุฏุฉ" class="w-full p-2 border rounded">
                    <button type="submit" class="bg-red-600 text-white px-6 py-2 rounded">ุชุบููุฑ ูููุฉ ุงููุฑูุฑ</button>
                </form>
            </div>

            <!-- ุชุจููุจ: ุฅุนุฏุงุฏุงุช ุงููุธุงู ุงูุนุงูุฉ -->
            <div id="general-settings-tab" class="settings-tab-content bg-white p-6 rounded shadow hidden">
                 <h3 class="font-bold text-lg mb-4 border-b pb-2">ุฅุนุฏุงุฏุงุช ุงููุธุงู ุงูุนุงูุฉ</h3>
                 <form id="general-settings-form" class="space-y-4">
                    <div>
                        <label for="school-name" class="block font-semibold">ุงุณู ุงููุฏุฑุณุฉ:</label>
                        <input type="text" id="school-name" placeholder="ูุซุงู: ูุฏุฑุณุฉ ุงูุฃูู" class="w-full p-2 border rounded mt-1">
                    </div>
                    <div>
                        <label for="current-academic-year" class="block font-semibold">ุงูุณูุฉ ุงูุฏุฑุงุณูุฉ ุงูุญุงููุฉ:</label>
                        <select id="current-academic-year" class="w-full p-2 border rounded mt-1">
                            <!-- ุณูุชู ุชุนุจุฆุชูุง ูู ุฌุฏูู Academic_year -->
                        </select>
                        <p class="text-sm text-gray-500 mt-1">ูุฐุง ุงูุฅุนุฏุงุฏ ูุญุฏุฏ ุงูุณูุฉ ุงูุงูุชุฑุงุถูุฉ ุนูุฏ ุฅุถุงูุฉ ุฃููุงุฌ ุฃู ุชูุงููุฐ ุฌุฏุฏ.</p>
                    </div>
                    <button type="submit" class="bg-blue-600 text-white px-6 py-2 rounded">ุญูุธ ุงูุฅุนุฏุงุฏุงุช ุงูุนุงูุฉ</button>
                 </form>
            </div>

            <!-- ุชุจููุจ: ุงูุจูุงูุงุช ูุงููุณุฎ ุงูุงุญุชูุงุทู -->
            <div id="data-backup-tab" class="settings-tab-content bg-white p-6 rounded shadow hidden">
                <h3 class="font-bold text-lg mb-4 border-b pb-2">ุฅุฏุงุฑุฉ ุงูุจูุงูุงุช ูุงููุณุฎ ุงูุงุญุชูุงุทู</h3>
                <p class="mb-4">ุชุตุฏูุฑ ุจูุงูุงุช ุงููุธุงู ุงูุฃุณุงุณูุฉ ููููุงุช Excel ููุญูุธ ุฃู ุงูุฃุฑุดูุฉ.</p>
                <div class="space-y-3">
                    <button id="export-all-students-btn" class="w-full text-left p-3 bg-gray-100 hover:bg-gray-200 rounded">
                        <i class="fas fa-user-graduate text-green-600 w-6"></i> ุชุตุฏูุฑ ูุงุฆูุฉ ุฌููุน ุงูุชูุงููุฐ
                    </button>
                     <button id="export-all-teachers-btn" class="w-full text-left p-3 bg-gray-100 hover:bg-gray-200 rounded">
                        <i class="fas fa-chalkboard-teacher text-blue-600 w-6"></i> ุชุตุฏูุฑ ูุงุฆูุฉ ุฌููุน ุงููุนูููู
                    </button>
                    <button id="export-all-grades-btn" class="w-full text-left p-3 bg-gray-100 hover:bg-gray-200 rounded">
                        <i class="fas fa-poll text-yellow-600 w-6"></i> ุชุตุฏูุฑ ุฌููุน ุงูุชููููุงุช ูุงูุฏุฑุฌุงุช
                    </button>
                </div>
            </div>
        </div>
    </div>
</div> 

<!-- ุญุงููุฉ ุฑุณุงุฆู ุงูุชูุจูู (Toast) -->
<div id="toast-container"></div>
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<!-- ุชุนุฑูู supabaseClient ููุงุฆู ุนุงู ูู ุฌููุน ุงูุตูุญุงุช ูุจู ุชุญููู main.js -->
<script>
  if (typeof window.supabaseClient === 'undefined') {
    const { createClient } = supabase;
    const SUPABASE_URL = 'https://rrkesmaombznchqhtvqh.supabase.co';
    const SUPABASE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJya2VzbWFvbWJ6bmNocWh0dnFoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTI3ODE1NjUsImV4cCI6MjA2ODM1NzU2NX0.VBD-XmhhgcbXaMB7IqvfABsf4yt6q4SdLZYxrj5Pv_4';
    window.supabaseClient = createClient(SUPABASE_URL, SUPABASE_KEY);
  }
</script>

<div id="student-info-modal" class="fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center hidden z-50 ">
  <div class="bg-white rounded-lg shadow-lg p-6 w-full max-w-md relative">
    <button id="close-student-info" class="absolute top-2 left-2 text-gray-500 text-xl">ร</button>
    <div id="student-info-content"></div>
  </div>
</div>

<!-- ูุงูุฐุฉ ุชูุงุตูู ุงูููุฌ -->
<div id="group-details-modal" class="hidden">
  <div id="group-details-content"></div>
</div>

<!-- ูุงูุฐุฉ ุฅุถุงูุฉ ุฃุณุชุงุฐ ููููุฌ -->
<div id="add-teacher-group-modal" class="fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center hidden z-50">
  <div class="bg-white rounded-lg shadow-lg p-6 w-full max-w-md relative">
    <button id="close-teacher-modal-btn" class="absolute top-2 left-2 text-gray-500 text-xl">ร</button>
    <form id="add-teacher-group-form">
      <h3 class="font-bold mb-4">ุฅุถุงูุฉ ุฃุณุชุงุฐ ููููุฌ</h3>
      <select id="teacher-group-select" class="w-full mb-3 p-2 border rounded" required>
        <!-- ุณูุชู ุชุนุจุฆุฉ ุงููุนูููู ููุง -->
      </select>
      <input type="text" id="teacher-group-subject" class="w-full mb-3 p-2 border rounded" placeholder="ุงููุงุฏุฉ" required />
      <button type="submit" class="bg-green-600 text-white px-6 py-2 rounded">ุฅุถุงูุฉ</button>
    </form>
  </div>
</div>

<div id="role-switcher" style="position: absolute; top: 10px; left: 10px; z-index: 9999;">
  <button id="current-role-btn" class="bg-blue-600 text-white px-4 py-2 rounded">
    ุงูุฏูุฑ ุงูุญุงูู: <span id="current-role-name"></span> โผ
  </button>
  <ul id="roles-dropdown" style="display:none; background:#fff; border:1px solid #ccc; list-style:none; padding:5px; margin:0; position:absolute; min-width:120px;">
    <!-- ุณูุชู ุชุนุจุฆุฉ ุงูุฃุฏูุงุฑ ููุง -->
  </ul>
</div>

<!-- ุงุณุชุฏุนุงุก ููุทุฉ ุงูุจุฏุงูุฉ ุงูุฑุฆูุณูุฉ ููุชุทุจูู ููุญุฏุฉ (module) -->
<script type="module" src="js/main.js"></script>
<script type="module" src="director2.js"></script>

<!-- ุจุทุงูุฉ ูุนูููุงุช ุงูุชูููุฐ -->

</div>
</body>
</html>

<style>
/* ุฃุถู ูุฐุง ูู ููู director.css ุฃู ูู <style> */
#group-details-modal {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.4);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 9999;
}
#group-details-modal > #group-details-content {
  background: #fff;
  border-radius: 12px;
  padding: 32px 24px 24px 24px;
  min-width: 320px;
  max-width: 95vw;
  max-height: 90vh;
  overflow-y: auto;
  box-shadow: 0 4px 32px rgba(0,0,0,0.15);
}
#group-details-modal.hidden {
  display: none;
}
#close-group-details {
  margin-top: 16px;
  background: #e53e3e;
  color: #fff;
  border: none;
  padding: 8px 24px;
  border-radius: 6px;
  cursor: pointer;
  font-weight: bold;
}
* ุฃุถู ูุฐุง ูู ููู CSS ุงูุฎุงุต ุจู */
body.dark-mode {
    background: #181818 !important;
    color: #f1f1f1 !important;
}
body.dark-mode .content-area,
body.dark-mode .modal,
body.dark-mode .sidebar-menu {
    background: #232323 !important;
    color: #f1f1f1 !important;
}
body.dark-mode input, body.dark-mode select, body.dark-mode textarea {
    background: #222 !important;
    color: #fff !important;
    border-color: #444 !important;
}
body:not(.dark-mode) {
    background: #fff !important;
    color: #222 !important;
}
</style>
